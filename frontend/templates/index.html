<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>谁是卧底 - 主持控制台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
<div class="main-container">
    <!-- 顶部控制栏 -->
    <div class="top-bar">
        <div class="game-title">
            <i class="fas fa-user-secret"></i>
            <span>谁是卧底 - 主持控制台</span>
            <div class="status-indicator">
                <div id="game-status" class="status-badge">等待注册</div>
            </div>
        </div>

        <div class="game-controls">
            <button class="control-btn btn-reset" onclick="resetGame()">
                <i class="fas fa-redo"></i> 重置游戏
            </button>
            <button class="control-btn btn-clear-all" onclick="clearAll()" style="background-color: #dc3545;">
                <i class="fas fa-trash-alt"></i> 清空所有
            </button>
        </div>
    </div>

    <!-- 游戏状态显示 -->
    <div class="game-state-display" id="game-state-display">
        等待游戏开始...
    </div>

    <!-- 统计卡片 -->
    <div class="stats-cards">
        <div class="stat-card">
            <h4><i class="fas fa-users"></i> 注册组数</h4>
            <div class="stat-value" id="stat-groups">0</div>
        </div>
        <div class="stat-card">
            <h4><i class="fas fa-gamepad"></i> 游戏次数</h4>
            <div class="stat-value" id="stat-games">0</div>
        </div>
        <div class="stat-card">
            <h4><i class="fas fa-microphone"></i> 当前回合</h4>
            <div class="stat-value" id="stat-round">0</div>
        </div>
        <div class="stat-card">
            <h4><i class="fas fa-trophy"></i> 最高分</h4>
            <div class="stat-value" id="stat-highscore">0</div>
        </div>
    </div>

    <!-- 主要内容区域 -->
    <div class="content-area">
        <!-- 左侧控制栏 -->
        <div class="left-sidebar">
            <!-- 词语设置 -->
            <div class="words-section">
                <h4><i class="fas fa-book"></i> 词语设置</h4>
                <div class="word-input">
                    <label for="undercover-word"><i class="fas fa-user-secret"></i> 卧底词</label>
                    <input type="text" id="undercover-word" placeholder="留空自动选择">
                </div>
                <div class="word-input">
                    <label for="civilian-word"><i class="fas fa-users"></i> 平民词</label>
                    <input type="text" id="civilian-word" placeholder="留空自动选择">
                </div>
                <div class="control-buttons-group">
                    <button class="control-btn btn-start" onclick="startSingleGame()">
                        <i class="fas fa-play"></i> 开始游戏
                    </button>
                    <button class="control-btn btn-multi" onclick="openMultiRoundModal()">
                        <i class="fas fa-layer-group"></i> 多轮游戏
                    </button>
                </div>
            </div>

            <!-- 倒计时显示 -->
            <div class="timer-display">
                <h4><i class="fas fa-clock"></i> 倒计时</h4>
                <div class="timer-item">
                    <div class="timer-label">描述阶段</div>
                    <div class="timer-value" id="desc-timer-display">--:--</div>
                </div>
                <div class="timer-item voting">
                    <div class="timer-label">投票阶段</div>
                    <div class="timer-value" id="vote-timer-display">--:--</div>
                </div>
            </div>
        </div>

        <!-- 中间玩家区域 -->
        <div class="players-section">
            <h3><i class="fas fa-users"></i> 玩家状态 (<span id="player-count">0</span>)</h3>
            <div class="players-grid" id="players-grid">
                <div class="player-card">
                    <div class="player-header">
                        <div class="player-name">等待玩家注册...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 右侧信息区域 -->
        <div class="info-section">
            <div class="info-tabs-container">
                <!-- 标签页导航按钮 -->
                <div class="tab-nav">
                    <button class="tab-nav-btn active" onclick="switchTab('descriptions')"><i class="fas fa-comments"></i> 描述</button>
                    <button class="tab-nav-btn" onclick="switchTab('votes')"><i class="fas fa-vote-yea"></i> 投票</button>
                    <button class="tab-nav-btn" onclick="switchTab('results')"><i class="fas fa-poll"></i> 结果</button>
                </div>
                <div class="info-tabs">
                    <!-- 描述记录 -->
                    <div class="tab-pane active" id="tab-descriptions">
                        <div class="tab-content" id="descriptions-content">
                            <div class="description-item">
                                <div class="desc-header">暂无描述</div>
                            </div>
                        </div>
                    </div>

                    <!-- 投票记录 -->
                    <div class="tab-pane" id="tab-votes">
                        <div class="tab-content" id="votes-content">
                            <div class="round-vote-section">
                                <div class="round-title">暂无投票记录</div>
                            </div>
                        </div>
                    </div>

                    <!-- 游戏结果 -->
                    <div class="tab-pane" id="tab-results">
                        <div class="tab-content" id="results-content">
                            <div class="result-item">
                                <div class="result-header">暂无游戏结果</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 底部信息栏 -->
    <div class="bottom-bar">
        <div>服务器: <span id="server-status" class="glow">已连接</span></div>
        <div>当前发言者: <span id="current-speaker-name" class="glow">--</span></div>
        <div>描述: <span id="desc-count">0/0</span> | 投票: <span id="vote-count">0/0</span></div>
    </div>
</div>

<!-- 多轮游戏配置模态框 -->
<div id="multiRoundModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>
                <i class="fas fa-layer-group"></i>
                开始多轮游戏
            </h2>
            <button class="close-btn" onclick="closeMultiRoundModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="round-count">
                    <i class="fas fa-hashtag"></i>
                    游戏轮数
                </label>
                <input type="number" id="round-count" min="1" max="10" value="1" 
                       onchange="generateRoundInputs()" placeholder="请输入轮数（1-10）">
            </div>
            <div class="rounds-container" id="rounds-container">
                <!-- 动态生成的轮数输入框将显示在这里 -->
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-btn modal-btn-secondary" onclick="closeMultiRoundModal()">
                <i class="fas fa-times"></i>
                取消
            </button>
            <button class="modal-btn modal-btn-primary" onclick="submitMultiRoundGame()">
                <i class="fas fa-check"></i>
                开始游戏
            </button>
        </div>
    </div>
</div>


    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
